console.log('This site was generated by Hugo.');
import * as Turbo from "@hotwired/turbo";
import { Application } from "@hotwired/stimulus";
import { Controller } from "@hotwired/stimulus";
import "@justinribeiro/lite-youtube";
import * as params from '@params';

class PlayerTemplateController extends Controller {

	/**
	* I get called whenever this controller instance is bound to a host element.
	*/
	connect() {

		// On page load, there is no turbo-frame since it's embedded within a content
		// template. The only goal of this controller is to ensure that a SINGLE instance
		// of said template exists (and is injected in between the HEAD and BODY tags
		// where it won't be affected by Turbo Drive's full-body content replacement).
		if ( ! document.querySelector( "#player" ) ) {

			document.body
				.before( this.element.content.cloneNode( true ) )
			;

		}

	}

}

// ----------------------------------------------------------------------------------- //
// ----------------------------------------------------------------------------------- //

window.Stimulus = Application.start();
// When not using the Ruby On Rails asset pipeline / build system, Stimulus doesn't know
// how to map controller classes to data-controller attributes. As such, we have to
// explicitly register the Controllers on Stimulus startup.
Stimulus.register( "player-template", PlayerTemplateController );

$(document).ready(function () {

  function placePlayer() {
    var destination = $('#youtube-bg').offset();
    console.log(destination.top + ", " + destination.left);
    $("#player").css({top: destination.top, left: destination.left});
  }

  placePlayer();

  document.addEventListener("turbo:load", () => {
    placePlayer();
  });

  $(window).resize(function() {
    placePlayer();
  });
});